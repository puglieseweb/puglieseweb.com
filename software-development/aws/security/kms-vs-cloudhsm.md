# KMS vs CloudHSM

A key management system (KMS) manages Encryption keys.



CMK (customer master key) is a logical representation of a master key. CMK includes metadata, such as the key ID, creation Data, description, and key state

CMK also contains the key material used to encrypt and decrypt data

CMK can be generated by:

1. AWS. The key material for a CMK is generated by HSMs managed by AWS.
2. Importing the key material generated using the owned key management infrastructure
3. Generate and use the key material in an AWS CloudHSM cluster as part of the custom key store feature in AWS KMS.

## HSM&#x20;

A hardware security module (HSM) is a physical computing device that safeguards and manages digital keys and performs encryption and decryption functions.  It contains one or more secure cryptoprocessor chips.



## CloudHSM

This is a physical devide entirely dedicated to you.

Enable to generate and use encryption keys on the AWS Cloud.&#x20;



## KMS vs Cloud HSM



| KMS                                   | Cloud HSM                                 |
| ------------------------------------- | ----------------------------------------- |
| Shared tenancy of underlying hardware | dedicated HSM                             |
| Automatic key rotation                | Full control of the underlining hardware  |
| Automatic key generation              | Full control of users, groups, keys, etc. |
|                                       | No automatic key rotation.                |
|                                       |                                           |
|                                       |                                           |



## Key Rotation

AWS KMS can automatically rotate CMKs every year, provided that keys are generated using AWS KMS HSMs.&#x20;

Automatic rotation is not supported for imported keys, asymmetric keys, or key generated using AWS CloudHSM cluster using the AWS KMS custom key store feature.



## Policies

Policies attached to an IAM identity are called **identity-based policies** (or IAM polices), and polices attached to other kind of resources are called **resource-based policies**.&#x20;

in AWS KMS,  resource-based policies are attached to the CMKs. This are called **key policies.**

## **Permissions**

3 ways of controlling permissions:

1. Use a key policy. Full scope and access to the CMK is defined in a single document (the key policy)
2. Use a key policy in combination with IAM policies. This allows to manage all the permission for the IAM identities.&#x20;
3. Use a key policy in combination to grants. This allows users to delegate their access to others.&#x20;
